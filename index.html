<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <title>Mangal ↔ Kruti Dev Converter</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background-color: #f8f9fa; }
    textarea { resize: vertical; font-size: 16px; }
    .kruti { font-family: "Kruti Dev 010", Arial, sans-serif; }
  </style>
</head>
<body>
<div class="container py-4">
  <div class="card shadow-lg">
    <div class="card-header bg-primary text-white d-flex align-items-center justify-content-between">
      <h4 class="mb-0">Mangal ↔ Kruti Dev Converter</h4>
      <img src="./img/logo.svg" alt="Logo" width="100" height="70">
    </div>
    <div class="card-body">
      <div class="row g-3">
        <!-- Left: Unicode / Mangal input -->
        <div class="col-md-6">
          <label for="mangaltext" class="form-label">इनपुट (Mangal / Unicode)</label>
          <textarea id="mangaltext" class="form-control" onkeyup="mangalkruti()" rows="12" placeholder="यहाँ यूनिकोड (Mangal) टेक्स्ट पेस्ट करें..."></textarea>
        </div>
        <!-- Right: Kruti Dev output -->
        <div class="col-md-6">
          <label for="krutitext" class="form-label">आउटपुट (Kruti Dev)</label>
          <textarea id="krutitext" class="form-control kruti" rows="12" placeholder="Kruti Dev text यहाँ दिखेगा..."></textarea>
        </div>
      </div>
      <div class="mt-3 text-center">
        <button class="btn btn-success me-2" onclick="mangalkruti()">Unicode → Kruti Dev</button>
        <button class="btn btn-secondary" onclick="clearText()">Clear</button>
      </div>
    </div>
  </div>
</div>

<script> 

// ---- आपका दिया हुआ JS कोड (थोड़ा सा wrap किया हुआ) ----
var array_from = new Array(
"‘","’","“","”","(",")","{","}","=","।","?","-","µ","॰",",",".","् ",
"०","१","२","३","४","५","६","७","८","९","x","फ़्","क़","ख़","ग़","ज़्","ज़","ड़","ढ़","फ़","य़","ऱ","ऩ",
"त्त्","त्त","क्त","दृ","कृ","ह्न","ह्य","हृ","ह्म","ह्र","ह्","द्द","क्ष्","क्ष","त्र्","त्र",
"ज्ञ","छ्य","ट्य","ठ्य","ड्य","ढ्य","द्य","द्व","श्र","ट्र","ड्र","ढ्र","छ्र","क्र","फ्र","द्र",
"प्र","ग्र","रु","रू","्र","ओ","औ","आ","अ","ई","इ","उ","ऊ","ऐ","ए","ऋ","क्","क","क्क","ख्","ख",
"ग्","ग","घ्","घ","ङ","चै","च्","च","छ","ज्","ज","झ्","झ","ञ","ट्ट","ट्ठ","ट","ठ","ड्ड","ड्ढ","ड","ढ",
"ण्","ण","त्","त","थ्","थ","द्ध","द","ध्","ध","न्","न","प्","प","फ्","फ","ब्","ब","भ्","भ","म्","म",
"य्","य","र","ल्","ल","ळ","व्","व","श्","श","ष्","ष","स्","स","ह","ऑ","ॉ","ो","ौ","ा","ी","ु","ू","ृ",
"े","ै","ं","ँ","ः","ॅ","ऽ","् ","्",

// ✅ Special conjuncts for इ-matra
"त्ति","ट्टि","ट्ठि","ड्डि","ड्ढि","द्डि","द्धि","क्टि","क्त्ति","त्रि","श्ति","ष्टि","स्रि","ज्ञि","क्षि","ह्रि","ग्नि","द्रि","प्रि","फ्रि","क्रि","ग्रि","श्रि",
// ✅ for उ/ऊ matra
"कु","कू","गु","गू","तु","तू","त्रु","त्रू","प्रु","प्रू","द्रु","द्रू",
// ✅ for ऋ
"कृ","गृ","तृ","दृ","पृ","भृ","मृ","शृ",
// ✅ Other conjuncts
"क्ष्म","क्ष्ण","क्ष्व","ज्ञ्य","श्च","श्छ","श्व","द्व","स्त्र","स्व","स्वि","ह्म","ह्य","ह्न"
);

var array_to = new Array(
"^","*","Þ","ß","¼","½","¿","À","¾","A","\\","&","&","Œ","]","-","~ ",
"å","ƒ","„","…","†","‡","ˆ","‰","Š","‹","Û","¶","d","[k","x","T","t","M+","<+","Q",";","j","u",
"Ù","Ùk","ä","–","—","à","á","â","ã","ºz","º","í","{","{k","«","=","K","Nî","Vî","Bî","Mî","<î","|","}","J","Vª","Mª","<ªª","Nª","Ø","Ý","æ","ç",
"xz","#",":","z","vks","vkS","vk","v","bZ","b","m","Å",",s",",","_","D","d","ô","[",
"[k","X","x","?","?k","³","pkS","P","p","N","T","t","÷",">","¥","ê","ë","V","B","ì","ï","M", //M=ड
"<",".",".k","R","r","F","Fk",")","n","/","/k","U","u","I","i","¶","Q","C","c","H","Hk","E","e", //e=म
"¸",";","j","Y","y","G","O","o","'","'k","\"","\"k","L","l","g","v‚","‚","ks","kS","k","h","q","w","`","s","S","a","¡","%","W","·","~ ","~",

// ✅ Special conjuncts for इ-matra
"Vf","Ûf","ßf","Ïf","×f","{f","nSf","dVf","VVf","=f","Lf","\"f","lf","Kf","{kf","gf","³f","nf","izf","Qf","df","xf","Jf",
// ✅ for उ/ऊ matra
"dq","dw","xq","xw","rq","rw","=q","=w","izq","izw","nq","nw",
// ✅ for ऋ
"d`","x`","r`","n`","i`","H`","e`","'`",
// ✅ Other conjuncts
"{ke","{k.", "{ko","K;","'p","'N","'o","no","l=","lo","lof","ge","g;","gu"
);


function mangalkruti() {
  var ts = document.getElementById("mangaltext").value.length;
  var afl = array_from.length;
  var mss = document.getElementById("mangaltext").value;
  var st1 = 0, st2 = 0, looper = 1;
  var pt = '';
  var max_ts = 10000;

  while (looper == 1) {
    st1 = st2;
    if (st2 < (ts - max_ts)) {
      st2 += max_ts;
      while (document.getElementById("mangaltext").value.charAt(st2) != ' ') { st2--; }
    } else { st2 = ts; looper = 0 }
    var mss = document.getElementById("mangaltext").value.substring(st1, st2);
    repsymb();
    pt += mss;
    document.getElementById("krutitext").value = pt;
  }

  function repsymb() {
    if (mss != "") {
      mss = mss.replace(/क़/, "क़");
      mss = mss.replace(/ख़‌/g, "ख़");
      mss = mss.replace(/ग़/g, "ग़");
      mss = mss.replace(/ज़/g, "ज़");
      mss = mss.replace(/ड़/g, "ड़");
      mss = mss.replace(/ढ़/g, "ढ़");
      mss = mss.replace(/ऩ/g, "ऩ");
      mss = mss.replace(/फ़/g, "फ़");
      mss = mss.replace(/य़/g, "य़");
      mss = mss.replace(/ऱ/g, "ऱ");

      var pof = mss.indexOf("ि");
      while (pof != -1) {
        var clf = mss.charAt(pof - 1);
        mss = mss.replace(clf + "ि", "f" + clf);
        pof = mss.search(/ि/, pof + 1);
      }

      var mat = "ािीुूृेैोौं:ँॅ";
      mss += '  ';
      var pohr = mss.indexOf("र्");
      while (pohr > 0) {
        var ppoz = pohr + 2;
        var cook = mss.charAt(ppoz + 1);
        while (mat.indexOf(cook) != -1) {
          ppoz = ppoz + 1;
          cook = mss.charAt(ppoz + 1);
        }
        repl_str = mss.substr(pohr + 2, (ppoz - pohr - 1));
        mss = mss.replace("र्" + repl_str, repl_str + "Z");
        pohr = mss.indexOf("र्");
      }
      mss = mss.substr(0, mss.length - 2);

      for (idx_sym = 0; idx_sym < afl; idx_sym++) {
        var idx = mss.indexOf(array_from[idx_sym]);
        while (idx != -1) {
          mss = mss.replace(array_from[idx_sym], array_to[idx_sym]);
          idx = mss.indexOf(array_from[idx_sym]);
        }
      }
    }
  }
}

function clearText() {
  document.getElementById("mangaltext").value = "";
  document.getElementById("krutitext").value = "";
}
</script>
</body>
</html>
